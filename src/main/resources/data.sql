-- Удаляем существующие таблицы
DROP TABLE IF EXISTS favorites;
DROP TABLE IF EXISTS recipes;
DROP TABLE IF EXISTS categories;

-- Создаем таблицу категорий
CREATE TABLE categories (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(100) NOT NULL UNIQUE,
    description VARCHAR(500),
    icon VARCHAR(50)
);

-- Создаем таблицу рецептов
CREATE TABLE recipes (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    description VARCHAR(500),
    category_id BIGINT NOT NULL,
    preparation_time INT NOT NULL,
    difficulty INT NOT NULL,
    rating DECIMAL(3,1),
    ingredients VARCHAR(2000) NOT NULL,
    instructions VARCHAR(5000) NOT NULL,
    servings INT NOT NULL,
    FOREIGN KEY (category_id) REFERENCES categories(id)
);

-- Создаем таблицу избранного
CREATE TABLE favorites (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    recipe_id BIGINT NOT NULL,
    user_name VARCHAR(100) NOT NULL,
    comment VARCHAR(500),
    added_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (recipe_id) REFERENCES recipes(id)
);

-- Вставляем категории с правильными иконками Font Awesome
INSERT INTO categories (title, description, icon) VALUES
('Закуски', 'Легкие блюда перед основным приемом пищи', 'fas fa-carrot'),
('Основные блюда', 'Сытные блюда для обеда или ужина', 'fas fa-drumstick-bite'),
('Десерты', 'Сладкие блюда после основной трапезы', 'fas fa-ice-cream'),
('Напитки', 'Различные напитки и коктейли', 'fas fa-glass-whiskey'),
('Выпечка', 'Хлеб, пироги, торты и другая выпечка', 'fas fa-bread-slice');

-- Вставляем рецепты
INSERT INTO recipes (title, description, category_id, preparation_time, difficulty, rating, ingredients, instructions, servings) VALUES
('Блины классические', 'Тонкие блинчики на молоке', 5, 40, 2, 4.5, 
'Молоко - 500 мл, Яйца - 2 шт., Мука - 250 г, Сахар - 2 ст.л., Соль - щепотка, Растительное масло - 2 ст.л.',
'1. Взбить яйца с сахаром и солью. 2. Добавить молоко и перемешать. 3. Просеять муку и добавить к смеси. 4. Добавить масло и оставить тесто на 20 минут. 5. Жарить на разогретой сковороде с двух сторон до золотистой корочки.',
4),

('Салат Цезарь', 'Классический салат с курицей и сухариками', 1, 25, 2, 4.8,
'Куриное филе - 300 г, Салат айсберг - 1 кочан, Помидоры черри - 200 г, Сухарики - 100 г, Пармезан - 50 г, Соус Цезарь - 4 ст.л.',
'1. Куриное филе отварить и нарезать кубиками. 2. Салат порвать руками, помидоры разрезать пополам. 3. На тарелку выложить салат, курицу, помидоры и сухарики. 4. Полить соусом и посыпать тертым пармезаном.',
2),

('Спагетти Карбонара', 'Итальянская паста с беконом', 2, 30, 3, 4.7,
'Спагетти - 400 г, Бекон - 200 г, Яйца - 4 шт., Сыр пармезан - 100 г, Чеснок - 2 зубчика, Сливки 20% - 200 мл, Соль, перец по вкусу',
'1. Спагетти отварить согласно инструкции на упаковке. 2. Бекон обжарить с чесноком. 3. Взбить яйца со сливками, солью и перцем. 4. Смешать горячие спагетти с беконом и яичной смесью. 5. Посыпать тертым пармезаном и сразу подавать.',
4),

('Шоколадный мусс', 'Нежный шоколадный десерт', 3, 20, 3, 4.9,
'Темный шоколад - 200 г, Сливки 33% - 300 мл, Яйца - 4 шт., Сахар - 50 г',
'1. Шоколад растопить на водяной бане. 2. Отделить желтки от белков. 3. Взбить сливки до мягких пиков. 4. Взбить белки с сахаром до устойчивых пиков. 5. Смешать желтки с растопленным шоколадом. 6. Аккуратно соединить все компоненты. 7. Разлить по креманкам и охладить 4 часа.',
6),

('Мохито безалкогольный', 'Освежающий мятный напиток', 4, 10, 1, 4.6,
'Свежая мята - 10 листиков, Лайм - 1 шт., Сахар - 2 ч.л., Содовая вода - 200 мл, Лед - 200 г',
'1. В стакан положить мяту и лайм, нарезанный дольками. 2. Добавить сахар и подавить мадлером. 3. Наполнить стакан льдом. 4. Залить содовой водой и аккуратно перемешать. 5. Украсить веточкой мяты и долькой лайма.',
1);

-- Вставляем избранное
INSERT INTO favorites (recipe_id, user_name, comment, added_date) VALUES
(1, 'Иван Петров', 'Любимый завтрак по выходным', '2024-01-05 09:30:00'),
(2, 'Мария Сидорова', 'Часто готовлю для гостей', '2024-01-05 12:00:00'),
(3, 'Алексей Иванов', 'Идеальное блюдо после работы', '2024-01-06 19:00:00'),
(4, 'Екатерина Смирнова', 'Обожаю этот десерт!', '2024-01-06 21:00:00'),
(5, 'Дмитрий Кузнецов', 'Освежающий напиток в жаркий день', '2024-01-07 15:00:00');